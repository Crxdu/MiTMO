# Работа с временным рядом
#### Данные отображают цены на акции компании WMT на момент их закрытия.

### Загрузка данных

![image](https://user-images.githubusercontent.com/91901972/234324521-84ac4c90-3c06-4999-9cc9-0d1c19581f6d.png)

### Построим график временного ряда

![image](https://user-images.githubusercontent.com/91901972/234324677-da9d781d-eec8-42cd-80e1-014258eaff14.png)

График показывает, что цены на акции WMT были в основном стабильны в начале периода. Однако, можно заметить, что существует большое количество короткосрочных колебаний цен, которые не подчиняются общему тренду и вызваны внешними факторами, такими как новости, экономические изменения и т.д.

На графике цен на момент закрытия акций компании WMT, представленном выше, можно наблюдать общий тренд цен на протяжении всего периода.

#### Посмотрим на скользящее среднее

![image](https://user-images.githubusercontent.com/91901972/234325559-4262045a-499a-453a-9544-cdea0ab585da.png)

### Тест Дикки-Фуллера 

Проверим на уровне значимости 0.05

![image](https://user-images.githubusercontent.com/91901972/234325889-02fcabc9-42ff-4f75-a719-dbd894f757fd.png)

![image](https://user-images.githubusercontent.com/91901972/234326399-3d40dd20-2335-4f9d-a7ec-d466b1db4071.png)

Results of Dickey-Fuller Test:

p-value = 0.9255. The series is likely non-stationary.

Test Statistic                   -0.300115

p-value                           0.925488

#Lags Used                       22.000000

Number of Observations Used    2821.000000

Critical Value (1%)              -3.432670

Critical Value (5%)              -2.862565

Critical Value (10%)             -2.567316

dtype: float64

На основании теста Дикки, можно сделать вывод о том, что временной ряд не является стационарным. Это подтверждается большим значением p-value, превышающим уровень значимости 0.05, и недостаточным значением тестовой статистики для отклонения от нулевой гипотезы о нестационарности ряда.

### Методология Бокса-Дженкинса.
#### ACF
![image](https://user-images.githubusercontent.com/91901972/234326545-36c3df8b-760b-4e8b-87f7-19e3e8e69885.png)

![image](https://user-images.githubusercontent.com/91901972/234326869-933ecf0a-e97e-418f-9a3c-cf109a043360.png)

#### PACF

![image](https://user-images.githubusercontent.com/91901972/234327069-0694e87d-2d31-45b3-bb5e-9bbd9cc7c334.png)

![image](https://user-images.githubusercontent.com/91901972/234327177-66bac045-6a4b-4726-96ea-98e389fc2383.png)

Это означает, что на 290 лаге автокорреляционная функция (ACF) последующие лаги становятся значимыми. Из графика PACF (Partial Autocorrelation Function) можно сделать вывод, что после второго лага все последующие лаги не являются значимыми, т.е. корреляция становится незначительной.

Результаты построение PACF и ACF не удовлетворительны. Сложно определить примерные значения p,q для построения ARIMA-модели. Предлагается для начала избавится от трендовой зависимости

### Удаления линейной трендовой составляющей из временного ряда

![image](https://user-images.githubusercontent.com/91901972/234327414-c37c6f6d-f00c-44ec-b1e4-8b1fa678120b.png)

### Тест Дикки-Фуллера  без тренда

p-value = 0.1542. The series is likely non-stationary.
Хоть ряд и не является стационарным, результаты теста Дики-Фуллера показывают, что значение p-value уменьшилось. Это может свидетельствовать о том, что ряд стал более стационарным, чем раньше.

### Методология Бокса-Дженкинса без тренда

#### ACF

![image](https://user-images.githubusercontent.com/91901972/234327914-a845b4a1-951d-4ace-8233-a99b2403fc44.png)

![image](https://user-images.githubusercontent.com/91901972/234327940-242f3c5e-c293-4b99-8e1b-e8f0fd2df4f1.png)

#### PACF

![image](https://user-images.githubusercontent.com/91901972/234327959-17ac4f9e-46a9-4940-8fbb-09b6420f431b.png)

![image](https://user-images.githubusercontent.com/91901972/234327996-a83bcc90-8a10-4723-9c68-dd0ca5bd9fdf.png)

Мы смогли снизить зависимость цены акции от предыдущих значений, однако она все еще остается существенной.

### Разделяем на обучающую и тестовую выборки

Размер обучающей выборки: 2556

Размер тестовой выборки: 288

![image](https://user-images.githubusercontent.com/91901972/234328396-b19d7ee1-8921-4a32-9aa8-a5612b3b1fb8.png)

Исходя из полученных результатов, можно сделать вывод, что модель ARIMA(7,1,6), которая учитывает тренд, дает более точные прогнозы, чем модель ARIMA(7,1,6) без тренда. Это можно объяснить тем, что в исходных данных присутствует заметный тренд, и учет тренда позволяет лучше описать структуру временного ряда.

### Проверим модель на тестовой выборке

![image](https://user-images.githubusercontent.com/91901972/234328674-89970b9f-bdd0-481b-ab8e-77e6e97716b3.png)

### Построим прогноз

![image](https://user-images.githubusercontent.com/91901972/234328847-78bca414-418d-43a6-b625-d5ac0ad2b100.png)

Исходя из анализа графика, можно сделать вывод, что в будущем цены на акции компании WMT скорее всего будут повышаться.

### Построение моделей для прогноза по разным периодам

![image](https://user-images.githubusercontent.com/91901972/234329153-1b8d5758-de7b-4c1e-a419-0e9b2b2d5d37.png)

Требуется разделить исходные данные на 3 блока:

1) До апреля 2015

2) апрель 2015 - начало 2019

3) начало 2019 - н.в.

Из результатов моделирования видно, что лучшая модель на первом блоке данных имеет порядок (0,1,0) и достигает AIC на тренировочной выборке в размере 1109.20, а на тестовой - 200.07. Лучшая модель на втором блоке данных имеет порядок (4,1,4) и достигает AIC на тренировочной выборке в размере 2210.01, а на тестовой - 340.95. Лучшая модель на третьем блоке данных имеет порядок (2,1,6) и достигает AIC на тренировочной выборке в размере 3908.29, а на тестовой - 423.07.

Модель с наименьшим значением AIC на тестовой выборке является наиболее предпочтительной для прогнозирования будущих значений. Следовательно, на основе результатов моделирования можно сделать вывод, что наиболее точная модель на тестовой выборке была построена на первом блоке данных и имеет порядок (0,1,0).





















